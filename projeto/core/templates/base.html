<!doctype html>
<html lang="pt-br">
{% load static %}
{% load widget_tweaks %}

<head>
  <!-- Required meta tags -->

  <!-- Exibe data e hora -->
  <script src="https://code.jquery.com/jquery-1.11.2.js"></script>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.8, shrink-to-fit=no">
  <link rel="shortcut icon" href="https://www.djangoproject.com/favicon.ico">

  <title>ESCTOP - SISTEMA</title>

  <!-- Bootstrap CSS -->  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  
  <!-- Font-awesome -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <!-- MEUS CSS -->
  {% block css %}{% endblock css %}
  <style>
    .select2-container .select2-selection--single {
      height: 31px !important;
    }
    .ok {
      color: green;
    }

    .no {
      color: red;
    }

    label.required:after {
      content: "*";
      color: red;
    }

    label {
      font-weight: bold;
      margin-bottom: 0px;
    }

    /* todas as letras maiusculas */
    .upper_all {
      text-transform: uppercase;
    }

    .lower_all {
      text-transform: lowercase;
    }

    /* STYLE DE CONTENT E TABS DOS TEMPLATES DE CADASTRO */
    body {
      font-family: Arial;
      background: url("{% static 'imagens/fundo.jpg' %}");
    }

    /* Style the tab */
    .tab {
      /* overflow: hidden; */
      border: 1px solid #ccc;
      background-color: #f1f1f1;
      border-top: 0px;
      /* position: fixed; */
      z-index: 1;
      top: 53px;
      /* width: 1109px; */
    }

    /* Style the buttons inside the tab */
    .tab button {
      background-color: inherit;
      float: left;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
      font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
      background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
      background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
      display: none;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-top: none;
      margin-top: 45px;
      -webkit-animation: fadeEffect 1s;
      z-index: -1;
    }

    /* Fade in tabs */
    @-webkit-keyframes fadeEffect {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes fadeEffect {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    /* STYLE DE CONTENT E TABS DOS TEMPLATES DE CADASTRO */

    /*ESTILO DAS LISTAS*/
    .maiusculo {
      text-transform: uppercase;
    }

    /*ESTILO DAS LISTAS*/

    /* ESTILOS DAS TELAS DE IMPRESSÃO DE DETALHES DE CLIENTE */
    .color {
      background-color: rgb(156, 156, 156);
    }

    {% comment %} h5 {
      padding: 5px;
      background-color: #ccc;
      text-transform: uppercase;
    } {% endcomment %}

    @media print {

      .no-print,
      .no-print * {
        display: none !important;
      }

      @page {
        margin: 0.5cm;
      }

      label {
        font-size: 9pt;
        padding: 0px;
      }

      h2 {
        font-weight: bold;
        padding: 0px;
        font-size: 13pt;
      }

      div {
        columns: 90px 1;
        margin: 0px, 0px, 0px, 0px;
      }

      @media all {
        .page-break {
          display: none;
        }
      }

      @media print {
        .page-break {
          display: block;
          page-break-before: always;
        }
      }
    }

    div.a {
      text-transform: uppercase;
    }
    /* ESTILOS DAS TELAS DE IMPRESSÃO DE DETALHES DE CLIENTE */

    /* TRANSIÇÃO DA TELA */
    .container { 
      animation: fadeInAnimation ease 1.5s; 
      animation-iteration-count: 1; 
      animation-fill-mode:none;
    } 
  
    @keyframes fadeInAnimation { 
    0% { 
        opacity: 0; 
    } 
    100% { 
        opacity: 1; 
      } 
    } 
    /* TRANSIÇÃO DA TELA */ 


    
  </style>
  <!-- MEUS CSS -->
  
</head>

<body>
  
  {% include "includes/nav.html" %}
  
  <div id="app" class="container cont">
    {% block content %}{% endblock content %}
  </div>
  {% include "includes/footer.html" %}
  

  

 
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  
  {% block js %}{% endblock js %}

  <script type="text/javascript">
    /*AUTOMATIZA A PESQUISA DE CEP*/
    function limpa_formulário_cep() {
      //Limpa valores do formulário de cep.
      document.getElementById('rua').value = ("");
      document.getElementById('bairro').value = ("");
      document.getElementById('cidade').value = ("");
      document.getElementById('uf').value = ("");
      
    }
    
    function meu_callback(conteudo) {
      if (!("erro" in conteudo)) {
        //Atualiza os campos com os valores.
        document.getElementById('rua').value = (conteudo.logradouro);
        document.getElementById('bairro').value = (conteudo.bairro);
        document.getElementById('cidade').value = (conteudo.localidade);
        document.getElementById('uf').value = (conteudo.uf);
        
      } //end if.
      else {
        //CEP não Encontrado.
        limpa_formulário_cep();
        alert("CEP não encontrado.");
      }
    }
    function pesquisacep(valor) {
      //Nova variável "cep" somente com dígitos.
      var cep = valor.replace(/\D/g, '');
      
      //Verifica se campo cep possui valor informado.
      if (cep != "") {
        
        //Expressão regular para validar o CEP.
        var validacep = /^[0-9]{8}$/;
        
        //Valida o formato do CEP.
        if (validacep.test(cep)) {
          
          //Preenche os campos com "..." enquanto consulta webservice.
          document.getElementById('rua').value = "...";
          document.getElementById('bairro').value = "...";
          document.getElementById('cidade').value = "...";
          document.getElementById('uf').value = "...";
          
          
          //Cria um elemento javascript.
          var script = document.createElement('script');
          
          //Sincroniza com o callback.
          script.src = 'https://viacep.com.br/ws/' + cep + '/json/?callback=meu_callback';
          
          //Insere script no documento e carrega o conteúdo.
          document.body.appendChild(script);
          
        } //end if.
        else {
          //cep é inválido.
          limpa_formulário_cep();
          alert("Formato de CEP inválido.");
        }
      } //end if./staticlário_cep();
      }
    };
    /*AUTOMATIZA A PESQUISA DE CEP*/

    
    /*OCULTA FORMULÁRIOS NA TELA DE CADASTRO DE CLIENTES - TABCONTENTS*/
    function openCity(evt, cityName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(cityName).style.display = "block";
      evt.currentTarget.className += " active";
    }
    /*OCULTA FORMULÁRIOS NA TELA DE CADASTRO DE CLIENTES - TABCONTENTS*/
    
  </script>

<!-- EXIBE A DATA E HORA NA TELA DE IMPRESSÃO DE DETALHES DO CLIENTE -->
  {% comment %} <script>
    function atualizaRelogio() {
      var momentoAtual = new Date();
      
      var vhora = momentoAtual.getHours();
      var vminuto = momentoAtual.getMinutes();
      var vsegundo = momentoAtual.getSeconds();
      
      var vdia = momentoAtual.getDate();
      var vmes = momentoAtual.getMonth() + 1;
      var vano = momentoAtual.getFullYear();
      
      if (vdia < 10) { vdia = "0" + vdia; }
      if (vmes < 10) { vmes = "0" + vmes; }
      if (vhora < 10) { vhora = "0" + vhora; }
      if (vminuto < 10) { vminuto = "0" + vminuto; }
      if (vsegundo < 10) { vsegundo = "0" + vsegundo; }
      
      dataFormat = vdia + " / " + vmes + " / " + vano;
      horaFormat = vhora + " : " + vminuto + " : " + vsegundo;
      
      document.getElementById("data").innerHTML = dataFormat;
      document.getElementById("hora").innerHTML = horaFormat;
      
      setTimeout("atualizaRelogio()", 1000);
    }
  </script> {% endcomment %}
  <!-- EXIBE A DATA E HORA NA TELA DE IMPRESSÃO DE DETALHES DO CLIENTE -->

  <!-- MODIFIQUEI ESSE SCRIPT PARA PODER PREENCHER OS DADOS DE ENDEREÇO DO REPRESENTANTE SEM 
  DEPENDER DA FUNÇÃO QUE JÁ FAZ ISSO NOS DADOS DA RAZÃO SOCIAL(CLEIENTE)  -->
  <script type="text/javascript">
    $("#cep2").focusout(function(){
        //Início do Comando AJAX
        $.ajax({
            //O campo URL diz o caminho de onde virá os dados
            //É importante concatenar o valor digitado no CEP
            url: 'https://viacep.com.br/ws/'+$(this).val()+'/json/unicode/',
            //Aqui você deve preencher o tipo de dados que será lido,
            //no caso, estamos lendo JSON.
            dataType: 'json',
            //SUCESS é referente a função que será executada caso
            //ele consiga ler a fonte de dados com sucesso.
            //O parâmetro dentro da função se refere ao nome da variável
            //que você vai dar para ler esse objeto.
            success: function(resposta){
                //Agora basta definir os valores que você deseja preencher
                //automaticamente nos campos acima.
                $("#logradouro").val(resposta.logradouro);
                $("#complemento").val(resposta.complemento);
                $("#bairro2").val(resposta.bairro);
                $("#cidade2").val(resposta.localidade);
                $("#uf2").val(resposta.uf);
                //Vamos incluir para que o Número seja focado automaticamente
                //melhorando a experiência do usuário
                $("#numero").focus();
            }
        });
    });
  </script>
  
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
  
  <script src="{% static 'bootstrap/js/jquery-3.3.1.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script type="text/javascript" src="{% static 'bootstrap/js/masks.js' %}"></script>
  <script type="text/javascript" src="{% static 'bootstrap/js/jquery.mask.min.js' %}"></script>  
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="https://raw.githubusercontent.com/igorescobar/jQuery-Mask-Plugin/master/src/jquery.mask.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  
</body>

</html>